function incrementChar(n){return String.fromCharCode(n.charCodeAt(0)+1)}function nextChartExcel(n){if(n.length==0)return"B";if(n.length==1)return n!="Z"?incrementChar(n):"AA";if(n.length==2){var t=n.split("");return t[1]=="Z"?t[0]=="Z"?"AAA":incrementChar(t[0])+"A":t[0]+incrementChar(t[1])}return n}function getRandomColor(){for(var t,u=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],r=new Array(5),i="#",n=0;n<6;n++)t=Math.round(Math.random()*16),r[n]=u[t==0?t:t-1],i=i+r[n];return i}function isTouchDevice(){var t=!0,n;try{document.createEvent("TouchEvent")}catch(i){t=!1}return n=navigator.userAgent,t=t||n.match(/(iPhone|iPod|iPad)/)||n.match(/BlackBerry/)||n.match(/Android/)?!0:!1}function reloadState(){setTimeout(reloadState,1e4);window.clientConnected&&window.client.server.reloadCompanyState(window.uiCode)}function showNotification(n){if(n.length!=0){var t="";n.lv==1?t="success":n.lv==2?t="info":n.lv==3?t="warning":n.lv==4&&(t="danger");$.notify({message:'<table cellpadding="3" cellspacing="3"><tr><td nowrap="nowrap">Cập nhật lúc :<\/td><td nowrap="nowrap"><i>'+Util.date.formatDateTime(new Date)+'<\/i><\/td><\/tr><tr><td nowrap="nowrap">Nội dung :<\/td><td nowrap="nowrap">'+getMessage(n.msg)+"<\/td><\/tr><\/table>"},{type:t,placement:{from:"bottom",align:"right",animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"}}})}}function showNotificationSuccess(){showNotification({lv:1,msg:'["Cập nhật thành công."]'})}function getMessage(n){for(var t=$.parseJSON(n),i="",r=0;r<t.length;r++)i+=t[0]+"<br/>";return i}function paddingDisplay2Number(n){return n<10?"0"+n:n}function request(n,t,i,r){$.post(n,t,i).fail(r)}function setCookie(n,t){var i=new Date;i.setTime(i.getTime()+864e5);document.cookie=n+"="+t+";expires="+i.toUTCString()+";path=/web"}function getCookie(n){var t=document.cookie.match("(^|;)?"+n+"=([^;]*)(;|$)");return t?t[2]:null}function sortbyProperty(n){var t=1;return n[0]==="-"&&(t=-1,n=n.substr(1)),function(i,r){var u=i[n]<r[n]?-1:i[n]>r[n]?1:0;return u*t}}function sortbyIndex(n){var t=1;return n<0&&(t=-1,n=Math.abs(n)),function(i,r){var u=i[n-1]<r[n-1]?-1:i[n-1]>r[n-1]?1:0;return u*t}}function createPopOverTopMenu(){$(".top-menu a.pasgerRunning").on("click",function(){$.get(Url.get("Home/GetVehiclePassengerRunningForTopbar"),null,function(n){var i='<div class="content"><table class="popover-table table-striped"><tr class="title"><td>Số hiệu xe<\/td><td>Mã tài<\/td><td>Vận tốc(Km/h)<\/td><td>Quãng đường<\/td><td>Số tiền<\/td><td>Số cuốc<\/td><td>Doanh thu<\/td><\/tr>',t;if(n=n.sort(sortbyIndex(2)),n.length>0)for(t=0;t<n.length;t++)i+="<tr><td>"+n[t][1]+'<\/td><td title="'+Util.string.format(n[t][3])+'">'+Util.string.format(n[t][2])+"<\/td><td>"+parseInt(n[t][4]/100)+"<\/td><td>"+Util.distance.gps.formatNoUnit(n[t][5])+"<\/td><td>"+Util.number.format(n[t][6])+"<\/td><td>"+n[t][7]+"<\/td><td>"+Util.number.format(n[t][8])+"<\/td><\/tr>";i+="<\/table><\/div>";$(".div-pasgerRunning").html(i)})});$(".top-menu a.pasgerStop").on("click",function(){$.get(Url.get("Home/GetVehiclePassengerIdleForTopbar"),null,function(n){var i='<div class="content"><table class="popover-table table-striped"><tr class="title"><td>Số hiệu xe<\/td><td>Mã tài<\/td><td>Tg dừng<\/td><td>Quãng đường<\/td><td>Số tiền<\/td><td>Số cuốc<\/td><td>Doanh thu<\/td><\/tr>',t;if(n=n.sort(sortbyIndex(2)),n.length>0)for(t=0;t<n.length;t++)i+="<tr><td>"+n[t][1]+'<\/td><td title="'+Util.string.format(n[t][3])+'">'+Util.string.format(n[t][2])+"<\/td><td>"+Util.date.formatDateTime2(n[t][4])+"<\/td><td>"+Util.distance.gps.formatNoUnit(n[t][5])+"<\/td><td>"+Util.number.format(n[t][6])+"<\/td><td>"+n[t][7]+"<\/td><td>"+Util.number.format(n[t][8])+"<\/td><\/tr>";i+="<\/table><\/div>";$(".div-pasgerStop").html(i)})});$(".top-menu a.freeRunnung").on("click",function(){$.get(Url.get("Home/GetVehicleFreeRunningForTopbar"),null,function(n){var i='<div class="content"><table class="popover-table table-striped"><tr class="title"><td>Số hiệu xe<\/td><td>Mã tài<\/td><td>Vận tốc(Km/h)<\/td><td>QĐ không khách<\/td><td>TG trả khách<\/td><td>Số cuốc<\/td><td>Doanh thu<\/td><\/tr>',t;if(n=n.sort(sortbyIndex(2)),n.length>0)for(t=0;t<n.length;t++)i+="<tr><td>"+n[t][1]+'<\/td><td title="'+Util.string.format(n[t][3])+'">'+Util.string.format(n[t][2])+"<\/td><td>"+parseInt(n[t][4]/100)+"<\/td><td>"+Util.distance.gps.formatNoUnit(n[t][5])+"<\/td><td>"+Util.date.formatDateTime2(n[t][6])+"<\/td><td>"+n[t][7]+"<\/td><td>"+Util.number.format(n[t][8])+"<\/td><\/tr>";i+="<\/table><\/div>";$(".div-freeRunnung").html(i)})});$(".top-menu a.freeStop").on("click",function(){$.get(Url.get("Home/GetVehicleFreeIdleForTopbar"),null,function(n){var i='<div class="content"><table class="popover-table table-striped"><tr class="title"><td>Số hiệu xe<\/td><td>Mã tài<\/td><td>TG dừng<\/td><td>TG trả khách<\/td><td>Số cuốc<\/td><td>Doanh thu<\/td><\/tr>',t;if(n=n.sort(sortbyIndex(2)),n.length>0)for(t=0;t<n.length;t++)i+="<tr><td>"+n[t][1]+'<\/td><td title="'+Util.string.format(n[t][3])+'">'+Util.string.format(n[t][2])+"<\/td><td>"+Util.date.formatDateTime2(n[t][4])+"<\/td><td>"+Util.date.formatDateTime2(n[t][5])+"<\/td><td>"+n[t][6]+"<\/td><td>"+Util.number.format(n[t][7])+"<\/td><\/tr>";i+="<\/table><\/div>";$(".div-freeStop").html(i)})});$(".top-menu a.freeOff").on("click",function(){$.get(Url.get("Home/GetVehicleFreePowerOffForTopbar"),null,function(n){var i='<div class="content"><table class="popover-table table-striped"><tr class="title"><td>Số hiệu xe<\/td><td>Mã tài<\/td><td>TG tắt máy<\/td><td>Tg trả khách<\/td><td>Số cuốc<\/td><td>Doanh thu<\/td><\/tr>',t;if(n=n.sort(sortbyIndex(2)),n.length>0)for(t=0;t<n.length;t++)i+="<tr><td>"+n[t][1]+'<\/td><td title="'+Util.string.format(n[t][3])+'">'+Util.string.format(n[t][2])+"<\/td><td>"+Util.date.formatDateTime2(n[t][4])+"<\/td><td>"+Util.date.formatDateTime2(n[t][5])+"<\/td><td>"+n[t][6]+"<\/td><td>"+Util.number.format(n[t][7])+"<\/td><\/tr>";i+="<\/table><\/div>";$(".div-freeOff").html(i)})})}function getBoolean(n){return n==null||n==!1?'<input type="checkbox" disabled="disabled" class="disabled" readonly/>':'<input type="checkbox" disabled="disabled" class="disabled" checked readonly/>'}function getString(n){return n>1?"Có":""}function formatValueNull(n){return n==null?"":n}function changeLanguage(n){$.post(Url.get("Home/Language"),{id:n},function(){setCookie("lan",n);document.location.href=document.location.href})}function runningFormatter(n,t,i){return i++,i}function formatDateTime(n){if(n){var t=new Date(parseInt(n.substr(6)));return paddingDisplay2Number(t.getDate())+"-"+paddingDisplay2Number(t.getMonth()+1)+" "+paddingDisplay2Number(t.getHours())+":"+paddingDisplay2Number(t.getMinutes())}return""}var moneyFormat="#,##0",distanceFormat="#,##0.#",rightBar=!1,Util;$(document).ready(function(){var t,r,i,f,u,n;$('[data-toggle="tooltip"]').tooltip();t=$(".notification-box").html();t&&t.length>0&&(showNotification($.parseJSON(t)),$(".notification-box").html(""));$(".tab-content").css("display","none");$(".tab li").on("click",function(){var t=$(this),u,i,n,r;if(!t.hasClass("active")){for(u=$(this).parent().attr("id"),i=$("#"+u+" li"),n=0;n<i.length;n++)r=$(i[n]),r.removeClass("active"),$("#"+r.attr("tab")).css("display","none");t.addClass("active");$("#"+t.attr("tab")).css("display","")}});if($(".tab .active").length==0)for(r=$(".tab"),i=0;i<r.length;i++)f=$(r[i]),u=$("#"+f.attr("id")+" li"),u.length>0&&(n=$(u[0]),n.addClass("active"),$("#"+n.attr("tab")).css("display",""));else n=$($(".tab .active")[0]),$("#"+n.attr("tab")).css("display","");window.setupClient&&setupClient(function(){client&&(client.client.reloadCompanyStateCallback=function(n,t){if(n==window.uiCode){var i=t.split(";");$(".pasgerRunning").html(i[0]);$(".pasgerStop").html(i[1]);$(".freeRunnung").html(i[2]);$(".freeStop").html(i[3]);$(".freeOff").html(i[4]);i[5]>=0&&(window.Reminder=i[5],$(".alert-reminder .summary").html(i[5]));i[6]>=0&&$(".alert-schedule .summary").html(i[6])}},client.client.authorizeCallback=function(){window.clientConnected=!0;setTimeout(reloadState,1e3);window.connectedCallback&&window.connectedCallback()},window.setupConfiguration&&window.setupConfiguration(client.client))});window.documentReadyCallback&&window.documentReadyCallback();createPopOverTopMenu()});Util={distance:{meter:{formatNoUnit:function(n){return n&&n>0?Util.number.format(parseInt(n/10)/10):0},getDistance:function(n){return n&&n>0?parseInt(n/10)/10:0}},gps:{formatNoUnit:function(n){return n&&n>0?Util.number.format(parseInt(n/100)/10):0},getDistance:function(n){return n&&n>0?parseInt(n/100)/10:0}}},number:{format:function(n){if(n>0){n.toFixed(1);n+="";for(var i=n.split("."),t=i[0],u=i.length>1?"."+i[1]:"",r=/(\d+)(\d{3})/;r.test(t);)t=t.replace(r,"$1,$2");return t+u}return n},format2:function(n){if(n==0)return"";if(n>0){n.toFixed(1);n+="";for(var i=n.split("."),t=i[0],u=i.length>1?"."+i[1]:"",r=/(\d+)(\d{3})/;r.test(t);)t=t.replace(r,"$1,$2");return t+u}return n},format3:function(n){var i;if(n==0)return"";if(n>0){n.toFixed(1);n+="";for(var u=n.split("."),t=u[0],s=u.length>1?"."+u[1]:"",e=/(\d+)(\d{3})/;e.test(t);)t=t.replace(e,"$1,$2");return t+s}if(n<0){i=0-n;i.toFixed(1);i+="";for(var f=i.split("."),r=f[0],h=f.length>1?"."+f[1]:"",o=/(\d+)(\d{3})/;o.test(r);)r=r.replace(o,"$1,$2");return"-"+r+h}return n}},string:{format:function(n){return n?n:""},formatBoolean:function(n){return n==!0?"Có":""}},date:{baseDateTime:function(){return new Date(2010,0,1,0,0,0,0)},getSeconds:function(n){return n?parseInt((n.getTime()-this.baseDateTime().getTime())/1e3):0},getDuration:function(n,t){return parseInt((n.getTime()-t.getTime())/1e3)},getDuration2:function(n,t){return this.formatTimeFromSeconds(Math.abs(this.getDuration(n,t)))},getTime:function(n){if(n==0)return"";var t=this.baseDateTime();return t.setSeconds(n),t},getTime2:function(n){if(n==0)return"";var t=this.baseDateTime();return t.setMinutes(n),t},formatDateTime:function(n){return n?paddingDisplay2Number(n.getMonth()+1)+"-"+paddingDisplay2Number(n.getDate())+" "+paddingDisplay2Number(n.getHours())+":"+paddingDisplay2Number(n.getMinutes())+":"+paddingDisplay2Number(n.getSeconds()):""},formatDateTime2:function(n){return n&&n>0?this.formatDateTime(this.getTime(n)):""},formatDateTime3:function(n){return n?paddingDisplay2Number(n.getYear()+1900+"-"+paddingDisplay2Number(n.getMonth()+1)+"-"+paddingDisplay2Number(n.getDate())+" "+paddingDisplay2Number(n.getHours())+":"+paddingDisplay2Number(n.getMinutes())):""},formatDateTime4:function(n){return n&&n>0?this.formatDateTime3(this.getTime(n)):""},formatDateTime5:function(n){return n?paddingDisplay2Number(n.getMonth()+1)+"-"+paddingDisplay2Number(n.getDate())+" "+paddingDisplay2Number(n.getHours())+":"+paddingDisplay2Number(n.getMinutes()):""},formatMeterTime:function(n){return n&&n>0?this.formatDateTime5(this.getTime(n)):""},formatDate:function(n){return n?paddingDisplay2Number(n.getYear()+1900)+"-"+paddingDisplay2Number(n.getMonth()+1)+"-"+paddingDisplay2Number(n.getDate()):""},formatDate2:function(n){if(n){var t=new Date(n);return paddingDisplay2Number(t.getYear()+1900)+"-"+paddingDisplay2Number(t.getMonth()+1)+"-"+paddingDisplay2Number(t.getDate())}return""},formatDate3:function(n){if(n){var t=Util.date.getTime(n);return paddingDisplay2Number(t.getYear()+1900)+"-"+paddingDisplay2Number(t.getMonth()+1)+"-"+paddingDisplay2Number(t.getDate())}return""},formatTime:function(n){return n?paddingDisplay2Number(n.getHours())+":"+paddingDisplay2Number(n.getMinutes())+":"+paddingDisplay2Number(n.getSeconds()):""},formatTime2:function(n){return n?paddingDisplay2Number(n.getHours())+":"+paddingDisplay2Number(n.getMinutes()):""},formatTime3:function(n){return this.formatTime2(this.getTime(n))},formatTime4:function(n){return this.formatTime2(this.getTime2(n))},formatTimeFromSeconds:function(n){if(n>0){var i="",r=parseInt(n/86400),t=n%86400;return r>0&&(i=r+"d "),i+paddingDisplay2Number(parseInt(t/3600))+":"+paddingDisplay2Number(parseInt(t%3600/60))+":"+paddingDisplay2Number(parseInt(t%3600%60))}return""},formatTimeFromSeconds2:function(n){if(n>0){var t="",i=parseInt(n/86400),r=n%86400;return i>0&&(t=i+"d "),t+paddingDisplay2Number(parseInt(r/3600))+":"+paddingDisplay2Number(parseInt(r%3600/60))}return""}}};